<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Seller's Page</title>


  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  <script src="https://widget.cloudinary.com/global/all.js" type="text/javascript"></script>
  <script src="assets/js/project.js" type="text/javascript"></script>

</head>

  <body class = "body3">

<!-- FireBase Reference -->
  <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>

<!-- Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
    <link rel = "stylesheet" href="assets/style.css">
</head>


<div class="container">
  <div class="row">
    <div class="col-sm">
      {{!-- One of three columns --}}

      <form role="form">
            <div class="form-group">
              <label class="H2" for="carName-input">Enter Bid</label>
              <input class="form-control" id="carName-input" type="text">
            </div>
            <div class="form-group">
              <label for="destination-input"></label>
              <input class="form-control" id="destination-input" type="text">
            </div>
            <div class="form-group">
              <label for="#arrival-input"></label>
              <input class="form-control" id="#arrival-input" type="text">
            </div>
            <div class="form-group">
              <label for="frequency-input"></label>
              <input class="form-control" id="frequency-input" type="text">
            </div>
            <button class="btn btn-default btn-primary" id="add-car-button" type="submit">Submit</button>
          </form>

    </div>
    <div class="col-sm">
      {{!-- One of three columns --}}

       <form>
          <div class="form-group">
            <label for="bid-input"></label>
              <table class="table table-dark" id = "car-table">
              <thead class="thead-light">
              <tbody>
                <tr>
                 <th text-align="center" class="H2" scope= "col">Current Bid</th>
                </tr>
                </thead>
              </tbody>
            </table>
        </form>
        
    </div>
    <br>
    <div class="col-sm">
      {{!-- //One of three columns --}}
      <div>
      <h2 class="H2">Seller</h2>
      
          <!-- upload widget div -->
      <div id="upload_widget_opener">
      </div>
    </div>
  </div>
</div>
 


<script type="text/javascript">  
  
  $('#upload_widget_opener').cloudinary_upload_widget(
              { cloud_name: 'dujbxdubf', upload_preset: 'zwrhaeyd', 
                cropping: 'server', folder: 'user_photos' },
              //This function is waiting for the result from the cloudinary upload
              //Asynchrinous function that runs after the result is recieved
                function(error, result) { 
                console.log(error, result)
                //turns secure_url into a variable from the result
                var img_url = result[0].secure_url;
                //creates a post message to send to the server
                $.ajax({
                //sets the type of message
                  type: 'POST',
                //this URL should match the api route
                  url:'/api/images',
                //this is the payload (payload is whats inside the message body) 
                  data: 
                //turns payload into a JSON string
                  JSON.stringify({
                //image url from the result, must match to the route logic
                    img_url: img_url
                  }),
                //runs after the response comes back from the server
                  success: function(result){
                   console.log(result);
                  }
                  ,
                //setting headers for the message
                  dataType: "json",
                  contentType: "application/json"
                });
                return img_url;
               });
</script>
</body>
</html>
